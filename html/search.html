<!DOCTYPE html>
<meta charset="utf-8">
<html>
<body onload="connect();">

	<script>

		    var connWS;
		    var obj, dbParam, xmlhttp, myObj, x, txt = "";



  function search() {
    var s = document.getElementById("inputId");
    //alert(s.value);
	connWS.send(s.value);

  }


    function connect() {
        if ("WebSocket" in window) {
            connWS = new WebSocket("ws://localhost:7786/");
            console.log("INFO : Requesting WebSocket connection to q process");
            connWS.onopen = function(obj) { console.log("INFO : WebSocket connection successful"); }
            connWS.onclose = function(obj) {
                console.log("INFO : WebSocket connection dropped");
                connWS.close();
            }
            connWS.onmessage = function(obj) {
                var res = JSON.parse(obj.data);
                        console.log(res);
					txt="";

                if (null !== res) {
                   
				        txt += "<table class='sui-table' > <thead><tr><th>Key</th><th>Index</th><th>Table</th> </tr></thead>";
				        for (x in res) {
				        	txt += "<tr>";
				            txt += "<td>" + res[x].iKey + "</td>";
							txt += "<td>" + res[x].iVal + "</td>";
							txt += "<td>" + res[x].iTab + "</td>";
							txt += "</tr>";
				        }
				        txt += "</table>"        
				        document.getElementById("demo").innerHTML = txt;


                }
            }
            connWS.onerror = function(obj) { console.log(obj.data); }
        } else alert("WebSockets not supported in this Browser");
    }





</script>

<p class="sansserif"> Search:
  <br>
  <input type="text" name="searchbox" id="inputId"><br>
  <button id="go" onclick="search();">Go</button>

</p>
<table class="sui-table" id="demo">
<thead><tr><th>Key</th><th>Index</th><th>Table</th> </tr></thead>
  <tbody>
    <tr>
      <td></td>
      <td></td>
      <td></td>

    </tr>

  </tbody>
</table>


</body>


<style>
p.serif {
  font: normal 14px "Trebuchet MS", Helvetica, serif;
}

p.sansserif {
  font: normal 14px "Trebuchet MS", consolas, sans-serif;
}

.sui-table {
  border: solid 1px #DDEEEE;
  border-collapse: collapse;
  border-spacing: 0;
  font: normal 12px "Trebuchet MS", Helvetica, sans-serif;
}

.sui-table thead th {
  background-color: #DDEFEF;
  border: solid 1px #DDEEEE;
  color: #336B6B;
  padding: 10px;
  text-align: left;
  text-shadow: 1px 1px 1px #fff;
}

.sui-table tbody td {
  border: solid 1px #DDEEEE;
  color: #333;
  padding: 10px;
  text-shadow: 1px 1px 1px #fff;
}
</style>